<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="https://cdn.jsdelivr.net/npm/@discord/embedded-app-sdk@latest/dist/index.js"></script>
    <style>
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; background: #000; }
        
        /* The invisible trigger layer */
        #trigger {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 999; cursor: pointer;
        }

        iframe { width: 100%; height: 100%; border: none; }
    </style>
</head>
<body>

    <div id="trigger" onclick="unlock()"></div>

    <iframe id="game" 
        src="https://classic.minecraft.net" 
        allow="autoplay; keyboard-lock; pointer-lock; gamepad; fullscreen">
    </iframe>

    <script>
        const discordSdk = new window.discordSdk.DiscordSDK("1437203189651865643");
        
        async function init() {
            try { await discordSdk.ready(); } catch(e) {}
        }

        function unlock() {
            const frame = document.getElementById('game');
            const layer = document.getElementById('trigger');
            
            // Remove the invisible layer so user can interact with the game
            layer.style.display = 'none';
            
            // Force focus to remove "Requires Keyboard" error
            frame.focus();
            
            // Reload src once with permissions if necessary
            if (!frame.src.includes('classic')) {
                frame.src = "https://classic.minecraft.net";
            }
        }

        init();
    </script>
</body>
</html>
